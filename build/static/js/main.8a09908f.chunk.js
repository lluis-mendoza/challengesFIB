(this.webpackJsonpchallengesfib=this.webpackJsonpchallengesfib||[]).push([[0],{54:function(e,t,n){},79:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),s=n(24),a=n.n(s),o=(n(54),n(17)),i=n.n(o),l=n(21),u=n(10),h=n(11),j=n(13),d=n(12),p=n(86),g=n(15),b=Object(g.a)(),O=n(26),f=n(19),m="GET_INFO",x="GET_USERS",v="GET_USER_CHALLENGES",C="USERS_LOGIN_SUCCESS",y="USERS_LOGIN_ERROR",S="USERS_LOGOUT",k="FIND_CHALLENGES",I="ENTER_CODE",E=n(20),R=n.n(E),U=n(18),L=n(87),_=n(89),w=n(83),G=n(44),N=n(84),T=n(88),A=n(90),F=n(85),D=(n(43),n(2)),P=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(u.a)(this,n),(c=t.call(this,e)).onChange=function(e){c.setState(Object(O.a)({},e.currentTarget.id,e.target.value))},c.handleEnterCode=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),c.props.foundChallenge(c.state.code,c.props.name),c.props.getUserInfo(c.props.name),c.props.getUserChallenges(c.props.name),c.props.getUsers();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.state={code:""},c}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.props.getChallenges(),this.props.getUserInfo(this.props.name),this.props.getUserChallenges(this.props.name),this.props.getUsers()}},{key:"renderUserChallenges",value:function(){var e=[];if(void 0!=this.props.userChallenges)for(var t=0;t<this.props.userChallenges.length;++t)e.push(Object(D.jsx)(L.a.Item,{children:this.props.userChallenges[t].name}));return e}},{key:"renderRanking",value:function(){var e=[];if(void 0!=this.props.users){var t=this.props.users;t.sort((function(e,t){return e.score-t.score}));for(var n=["1st","2nd","3rd","4th","5th","6th","7th"],c=0;c<Math.min(7,t.length);++c)e.push(Object(D.jsxs)(L.a.Item,{children:[n[c]," ",t[c].name," ",t[c].score]}))}return e}},{key:"renderChallenges",value:function(){var e=[];if(void 0!=this.props.challenges)for(var t=0;t<this.props.challenges.length;++t){var n="./images/"+this.props.challenges[t].image+".png";e.push(Object(D.jsx)(_.a,{class:"shadow-lg p-0 mb-2 bg-white rounded",children:Object(D.jsxs)(w.a,{children:[Object(D.jsx)(G.a,{children:Object(D.jsx)(_.a.Img,{class:"center",style:{height:"100px"},roundedCircle:"true",src:n})}),Object(D.jsxs)(G.a,{children:[" ",Object(D.jsxs)(_.a.Body,{children:[Object(D.jsx)(_.a.Title,{children:this.props.challenges[t].name}),Object(D.jsxs)(_.a.Text,{children:[this.props.challenges[t].description," "]})]})]})]})}))}return e}},{key:"render",value:function(){return Object(D.jsx)("div",{children:Object(D.jsx)(N.a,{children:Object(D.jsxs)(w.a,{children:[Object(D.jsxs)(G.a,{children:[Object(D.jsx)("h3",{children:"Completed challenges"}),Object(D.jsx)(L.a,{children:this.renderUserChallenges()})]}),Object(D.jsxs)(G.a,{xs:6,children:[Object(D.jsx)("h3",{children:"Challenges"}),Object(D.jsx)(w.a,{children:Object(D.jsxs)(T.a,{onClick:this.handleEnterCode,children:[Object(D.jsx)(G.a,{children:Object(D.jsx)(T.a.Control,{className:this.props.codeSuccess?"form-control":"form-control is-invalid",onChange:this.onChange,id:"code",placeholder:"Challenge Code"})}),Object(D.jsx)(G.a,{children:Object(D.jsx)(A.a,{type:"submit",variant:"outline-secondary",children:"Enter"})})]})}),Object(D.jsx)("br",{}),Object(D.jsx)(F.a,{children:this.renderChallenges()})]}),Object(D.jsxs)(G.a,{children:[Object(D.jsx)("h3",{children:"Ranking"}),this.renderRanking()]})]})})})}}]),n}(c.Component),B=Object(f.b)((function(e){return{name:e.authReducer.name,challenges:e.challengeReducer.challenges,codeSuccess:e.challengeReducer.codeSuccess,userChallenges:e.authReducer.userChallenges,users:e.authReducer.users}}),{getChallenges:function(){return function(e){R.a.get("api/challenges").then((function(t){e({type:k,challenges:t.data})})).catch((function(e){console.log(e)}))}},getUsers:function(){return function(e){R.a.get("api/users").then((function(t){console.log(t.data),e({type:x,users:t.data})})).catch((function(e){console.log(e)}))}},getUserChallenges:function(e){return function(t){R.a.get("api/users/"+e+"/challenges").then((function(e){console.log(e.data),t({type:v,userChallenges:e.data})})).catch((function(e){console.log(e)}))}},getUserInfo:function(e){return function(t){R.a.get("api/users/"+e).then((function(e){t({type:m,score:e.data.score})})).catch((function(e){console.log(e)}))}},foundChallenge:function(e,t){return function(n){""!=e&&R.a.post("api/foundChallenge/"+e,{name:t}).then((function(e){200===e.status&&n({type:I,codeSuccess:e.data.success})})).catch((function(e){console.log(e)}))}}})(P),M=n(27),H=n.n(M),J=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(e){var c;return Object(u.a)(this,n),(c=t.call(this,e)).responseGoogle=function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.props.login(t.tokenId);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c.state={},c}return Object(h.a)(n,[{key:"render",value:function(){return Object(D.jsx)("div",{className:"limiter",children:Object(D.jsx)(H.a,{clientId:"955747415605-uk2u238n84shljl7urt9hro9s7vm0bti.apps.googleusercontent.com",buttonText:"Login",onSuccess:this.responseGoogle,onFailure:this.responseGoogle,isSignedIn:!0,cookiePolicy:"single_host_origin"})})}}]),n}(c.Component),q=Object(f.b)((function(e){return{}}),{login:function(e){return function(t){try{var n=Object(U.a)(e);localStorage.setItem("token",e),t({type:C,name:n.name}),b.push("/home")}catch(c){}}}})(J),z=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(D.jsx)("div",{children:Object(D.jsx)("h1",{children:"Profile"})})}}]),n}(c.Component),K=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(D.jsx)("div",{className:"not-found",children:Object(D.jsx)("h1",{children:"404 Page not found"})})}}]),n}(c.Component),Q=(n(79),n(6)),V=n(46),W=function(e){var t=e.component,n=Object(V.a)(e,["component"]);return Object(D.jsx)(c.Fragment,{children:function(){try{var e=localStorage.getItem("token");Object(U.a)(e);return!0}catch(t){return!1}}()?Object(D.jsx)(p.b,Object(Q.a)(Object(Q.a)({},n),{},{render:function(e){return Object(D.jsx)(t,Object(Q.a)(Object(Q.a)({},n),e))}})):Object(D.jsx)(p.a,{to:"/login"})})},X=function(e){Object(j.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(u.a)(this,n),(e=t.call(this)).logout=Object(l.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Logout"),e.props.logout();case 2:case"end":return t.stop()}}),t)}))),e}return Object(h.a)(n,[{key:"render",value:function(){return Object(D.jsx)(p.c,{history:b,children:Object(D.jsxs)("div",{className:"base",children:[Object(D.jsxs)("div",{className:"header",children:[Object(D.jsx)("h1",{children:"Challenges FIB"}),this.props.isAuthenticated&&Object(D.jsx)("p",{children:this.props.name}),this.props.isAuthenticated&&Object(D.jsx)(M.GoogleLogout,{clientId:"658977310896-knrl3gka66fldh83dao2rhgbblmd4un9.apps.googleusercontent.com",buttonText:"Logout",onLogoutSuccess:this.logout})]}),Object(D.jsx)(N.a,{children:Object(D.jsxs)(p.d,{children:[Object(D.jsx)(p.b,{path:"/",exact:!0,component:q}),Object(D.jsx)(p.b,{path:"/login",component:q}),Object(D.jsx)(W,{path:"/home",component:B}),Object(D.jsx)(W,{path:"/profile",component:z}),Object(D.jsx)(p.b,{component:K})]})})]})})}}]),n}(c.Component),Y=Object(f.b)((function(e){return{isAuthenticated:e.authReducer.isAuthenticated,name:e.authReducer.name}}),{logout:function(){return function(e){console.log("logout"),localStorage.removeItem("token"),e({type:S}),b.push("/login")}}})(X),Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,91)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))},$=n(28),ee={challenges:[],codeSuccess:!0};var te=function(){var e=localStorage.getItem("token");if(console.log(e),null===e)return!1;try{Object(U.a)(e);return!0}catch(t){return!1}},ne={isAuthenticated:te(),name:!1===te()?"":Object(U.a)(localStorage.getItem("token")).name};var ce=n(45),re=Object($.b)({challengeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(Q.a)(Object(Q.a)({},e),{},{challenges:t.challenges});case I:return Object(Q.a)(Object(Q.a)({},e),{},{codeSuccess:t.codeSuccess});default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(Q.a)(Object(Q.a)({},e),{},{isAuthenticated:!0,name:t.name});case m:return Object(Q.a)(Object(Q.a)({},e),{},{score:t.score});case v:return Object(Q.a)(Object(Q.a)({},e),{},{userChallenges:t.userChallenges});case x:return Object(Q.a)(Object(Q.a)({},e),{},{users:t.users});case y:return{};case S:return{isAuthenticated:!1};default:return e}}}),se=Object($.c)(re,Object($.a)(ce.a));a.a.render(Object(D.jsx)(f.a,{store:se,children:Object(D.jsx)(r.a.StrictMode,{children:Object(D.jsx)(Y,{})})}),document.getElementById("root")),Z()}},[[82,1,2]]]);
//# sourceMappingURL=main.8a09908f.chunk.js.map